# Data Model: In-Memory Todo CLI Application

**Feature**: 001-inmemory-todo-cli
**Date**: 2025-12-29
**Source**: [spec.md](./spec.md) - Key Entities section

## Entity: Task

A Task represents a unit of work to be tracked by the user.

### Fields

| Field | Type | Required | Default | Constraints | Description |
|-------|------|----------|---------|-------------|-------------|
| id | int | Yes | Auto-generated | Positive integer, unique, immutable | Unique identifier assigned at creation |
| title | str | Yes | None | Non-empty, non-whitespace | Brief description of the task |
| description | str | No | "" | Any string | Optional detailed description |
| completed | bool | No | False | True/False | Whether the task is done |

### Validation Rules

1. **ID Validation**
   - MUST be a positive integer (>= 1)
   - MUST be unique within the session
   - MUST NOT change after creation
   - Generated by TaskManager, not user-provided

2. **Title Validation**
   - MUST NOT be empty string
   - MUST NOT be whitespace-only
   - MUST be stripped of leading/trailing whitespace before storage

3. **Description Validation**
   - MAY be empty string (optional field)
   - SHOULD be stripped of leading/trailing whitespace

4. **Completed Validation**
   - MUST be boolean True or False
   - Defaults to False on creation

### State Transitions

```
┌─────────────────┐
│   (created)     │
│ completed=False │
└────────┬────────┘
         │ toggle_complete()
         ▼
┌─────────────────┐
│ completed=True  │
└────────┬────────┘
         │ toggle_complete()
         ▼
┌─────────────────┐
│ completed=False │
└────────┴────────┘
    (cycles)
```

### Example Instances

```python
# Minimal task (title only)
Task(id=1, title="Buy groceries", description="", completed=False)

# Full task
Task(id=2, title="Submit report", description="Q4 quarterly report due Friday", completed=False)

# Completed task
Task(id=3, title="Call mom", description="", completed=True)
```

### Python Implementation

```python
from dataclasses import dataclass, field


@dataclass
class Task:
    """Represents a todo task.

    Attributes:
        id: Unique identifier (auto-assigned by TaskManager)
        title: Brief description of the task (required)
        description: Optional detailed description
        completed: Whether the task is complete (default: False)
    """
    id: int
    title: str
    description: str = ""
    completed: bool = False
```

## Storage Model

Tasks are stored in-memory using a dictionary structure:

```python
_tasks: dict[int, Task] = {}
```

### Storage Characteristics

| Characteristic | Value |
|---------------|-------|
| Persistence | None (in-memory only) |
| Capacity | Limited by available RAM |
| Lookup complexity | O(1) by ID |
| List complexity | O(n) |
| Insert complexity | O(1) |
| Delete complexity | O(1) |

### ID Generation

```python
_next_id: int = 1

def _generate_id(self) -> int:
    """Generate next unique ID and increment counter."""
    current_id = self._next_id
    self._next_id += 1
    return current_id
```

**Guarantees**:
- IDs start at 1
- IDs increment by 1 for each new task
- Deleted IDs are never reused
- IDs remain unique throughout session

## Relationships

This is a single-entity model with no relationships. In future phases, relationships
may include:
- User → Task (when authentication is added)
- Category → Task (when categorization is added)
- Task → Subtask (when hierarchy is added)

These are explicitly **out of scope** for Phase I.
